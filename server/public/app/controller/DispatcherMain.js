// Generated by IcedCoffeeScript 1.3.3d

console.log("file included");

Ext.define("HomeSec.controller.DispatcherMain", {
  requires: ["HomeSec.store.SStatus", "HomeSec.model.MStatus", "HomeSec.utils.WebSocket"],
  config: {
    stores: ["SStatus"],
    models: ["MStatus"]
  },
  extend: "Ext.app.Controller",
  init: function() {
    window.cont = this;
    console.log("DispatcherMain Up");
    this.socket = window.thesocket;
    return this.callParent(arguments);
  },
  launch: function() {
    console.log(this.socket);
    return this.socket.onSignal({
      signal: "news",
      fn: function(news) {
        var r, store;
        store = Ext.getStore("SStatus");
        r = store.findRecord("sensorName", news.sensorName);
        console.log("Found: " + r);
        r.set("sensorValue", news.sensorValue);
        return console.log("Here's the news: " + news.sensorName);
      }
    });
  }
});
